# Dropbox Photo Organizer Configuration
# Copy this file to config.yaml and fill in your values

dropbox:
  # OAuth 2.0 Authentication (Recommended - supports automatic token refresh)
  # Run 'python scripts/authorize_dropbox.py' to get these values
  app_key: "YOUR_DROPBOX_APP_KEY_HERE"
  app_secret: "YOUR_DROPBOX_APP_SECRET_HERE"  # Optional but recommended

  # Legacy Authentication (Not recommended - tokens expire without refresh)
  # Use either OAuth OR access_token, not both
  # access_token: "YOUR_DROPBOX_ACCESS_TOKEN_HERE"

  # Source folder path in Dropbox (e.g., "/Photos/Family" or "/Camera Uploads")
  source_folder: "/path/to/source/folder"

  # Destination folder for photos with the target person
  destination_folder: "/path/to/destination/folder"

  # Token storage mode: 'keyring' (secure) or 'config' (less secure)
  # keyring: Stores refresh token in system keyring (recommended)
  # config: Stores refresh token in this config file (not recommended for shared systems)
  token_storage: "keyring"

face_recognition:
  # Provider to use: 'local', 'aws', or 'azure'
  # - local: Uses face_recognition library (dlib), runs offline, free
  # - aws: Uses AWS Rekognition (requires AWS account, API costs)
  # - azure: Uses Azure Face API (requires Azure account, API costs)
  provider: "local"

  # Path to reference photos of the person to detect (local directory)
  reference_photos_dir: "./reference_photos"

  # Face matching tolerance (lower = more strict, typical range: 0.4-0.6)
  tolerance: 0.6

  # Thumbnail size for faster processing (width x height)
  thumbnail_size: "w256h256"

  # Provider-specific configurations

  # Local provider settings
  local:
    # Detection model: 'hog' (fast, CPU-friendly) or 'cnn' (accurate, GPU-preferred)
    model: "hog"

    # Encoding model: 'small' (faster) or 'large' (more accurate, 68 facial landmarks)
    encoding_model: "large"

    # Training parameters (used by train_face_model.py)
    training:
      num_jitters: 50  # 50-100 for maximum accuracy (slow but done once)

    # Recognition parameters (used by organize_photos.py)
    recognition:
      num_jitters: 1   # 1-10 for speed when processing Dropbox photos

  # AWS Rekognition settings (only needed if provider is 'aws')
  aws:
    # AWS credentials (optional if using AWS CLI configuration)
    # aws_access_key_id: "YOUR_AWS_ACCESS_KEY"
    # aws_secret_access_key: "YOUR_AWS_SECRET_KEY"
    aws_region: "us-east-1"
    similarity_threshold: 80.0  # Percentage (0-100)

  # Azure Face API settings (only needed if provider is 'azure')
  azure:
    # azure_api_key: "YOUR_AZURE_API_KEY"
    # azure_endpoint: "https://YOUR_REGION.api.cognitive.microsoft.com"
    person_group_id: "dropbox-photo-organizer"
    confidence_threshold: 0.5  # 0.0 to 1.0

processing:
  # Operation mode: 'copy' (default, safer) or 'move' (destructive)
  # Copy preserves original files, move deletes them from source
  operation: "copy"

  # Enable operation logging to track all file operations
  log_operations: true

  # Enable dry run mode (list matches without copying/moving files)
  dry_run: true

  # Batch size for processing photos
  batch_size: 50

  # Use full-size photos instead of thumbnails (higher accuracy, slower, more bandwidth)
  # Set to true when thumbnails produce poor face detection results
  use_full_size_photos: false

  # Supported image extensions
  image_extensions:
    - .jpg
    - .jpeg
    - .png
    - .heic

  # Enable verbose logging
  verbose: true
